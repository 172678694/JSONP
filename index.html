<!DOCTYPE html>
<html lang="Hans-zh">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body>
    <p>您的余额是
        <span id="amount">100</span>
    </p>
    <button id='button'>支付</button> <!--每次减少1元-->
    <script>
        button.addEventListener('click', function () {
            let script = document.createElement('script')
            functionName = 'jquery' + parseInt(Math.random() * 10000000, 10)
            window[functionName] = function () {
                amount.innerText = amount.innerText - 1
            }
            script.src = 'http://jack.com/pay?callback=' + functionName
            body.appendChild(script)

            script.onload = function (e) {
                e.currentTarget.remove()
                delete window[functionName]
            }

            script.onerror = function (e) {
                e.currentTarget.remove()
                delete window[functionName]
            }
        })

        /**用jQuery来实现,更简单**/
        // $.ajax({
        //     url: "http://jack.com:8002/pay",
        //     dataType: "jsonp",
        //     success: function (response) {
        //         if (response === 'success') {
        //             amount.innerText = amount.innerText - 1
        //         }
        //     }
        // })

        // $.jsonp()
    </script>
</body>

</html>